$(function(){$(".col").sortable({connectWith:".col",handle:".card-body",cancel:".toggle",placeholder:".placeholder"})}),$(document).on("click",".col",function(){$(this).closest(".card").find("card-title").toggle()}),$(document).on("sortreceive",".col",function(t,e){t.preventDefault();$.post({url:"/modListPos",data:JSON.stringify({list_id:e.item.attr("id"),new_col_id:{one:"1",two:"2",three:"3"}[e.item.parent().attr("id")]}),contentType:"application/json; charset=utf-8",dataType:"json"})}),$(document).on("submit","form",function(t){t.preventDefault();const e=$(this);if("create_list"===e.attr("id")){e.find("button.btn-primary").prop("disabled",!0);const t=e.find("input").val();if(""===t)return $("#listCreationModal").modal("hide"),e.find("button.btn-primary").prop("disabled",!1),$("nav").after('<header><div class="alert alert-danger border text-center alert-dismissible fade show" role="alert">Please Provide a Title<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div></header>'),!1;const i=e.find("textarea").val();$.post({url:e.attr("action"),data:JSON.stringify({title:t,description:i}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(t){$("#listCreationModal").modal("hide"),e.find("button.btn-primary").prop("disabled",!1),e.find("input").val(""),e.find("textarea").val("");const i=`                 <div class="modal fade" id="list${t.list_id}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="list${t.list_id}Title" aria-hidden="true">\n                        <div class="modal-dialog">\n                            <form action="/modifyList/${t.list_id}" method="POST" class="modify_list">\n                                <div class="modal-content">\n                                    <div class="modal-header">\n                                        <h5 class="modal-title" id="list${t.list_id}Title">Edit Post:</h5>\n                                    </div>\n                                    <div class="modal-body">\n                                        <div class="mb-3">\n                                            <label for="titleEdit" class="form-label">Title</label>\n                                            <input type="text" class="form-control form-control-lg" id="titleEdit" name="title_edit" placeholder="Title" value="${t.list_title}" maxlength="255">\n                                        </div>\n                                        <div class="mb-3">\n                                            <label for="descriptionEdit" class="form-label">Description</label>\n                                            <textarea class="form-control form-control-lg" id="descriptionEdit" name="description_edit" placesholder="Description" maxlength="2048">${t.list_desc}</textarea>\n                                        </div>\n                                    </div>\n                                    <div class="modal-footer">\n                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>\n                                        <button type="submit" class="btn btn-danger" name="list_id_to_delete" value="${t.list_id}">Delete</button>\n                                        <button type="submit" class="btn btn-primary" name="list_id" value="${t.list_id}">Edit</button>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                        <div class="card" id="${t.list_id}">\n                        <div class="card-body">\n                            <h5 class="card-title">${t.list_title}</h5><span class="toggle"></span>\n                            <p class="card-text">${t.list_desc}</p>\n                        </div>\n                        <div class="card-footer">\n                            <button class="btn btn-secondary mb-3" data-bs-toggle="modal" data-bs-target="#list${t.list_id}">Modify</button>\n                        </div>\n                    </div>\n                `;$("#one").append(i),$("form").bind("submit")})}else{const t=$("button[type=submit][clicked=true]");t.prop("disabled",!0),e.find("button.btn-primary").prop("disabled",!0),e.find("button.btn-danger").prop("disabled",!0);const i=t.val();if("list_id_to_delete"===t.attr("name"))$.post({url:e.attr("action"),data:JSON.stringify({list_id:i,to_delete:!0}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(t){$(`#list${i}`).modal("hide"),e.find("button.btn-primary").prop("disabled",!1),e.find("button.btn-danger").prop("disabled",!1),$(`#${i}`).remove()});else{const t=e.find("input").val(),a=e.find("textarea").val();if(""===t)return $(`#list${i}`).modal("hide"),e.find("button.btn-primary").prop("disabled",!1),$("nav").after('<header><div class="alert alert-danger border text-center alert-dismissible fade show" role="alert">Please Make Sure You Have a Title<button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button></div></header>'),!1;$.post({url:e.attr("action"),data:JSON.stringify({list_id:i,to_delete:!1,title:t,desc:a}),contentType:"application/json; charset=utf-8",dataType:"json"}).done(function(){$(`#list${i}`).modal("hide"),e.find("button.btn-primary").prop("disabled",!1),e.find("button.btn-danger").prop("disabled",!1);let n=$(`#${i}`);n.find("h5").text(t),n.find("p").text(a)})}$("button[type=submit][clicked=true]").attr("clicked","false")}}),$(document).on("click","form button[type=submit]",function(){$("button[type=submit]",$(this).parents("form")).removeAttr("clicked"),$(this).attr("clicked","true")});